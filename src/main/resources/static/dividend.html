<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배당금 관리 - Trading Journal</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/dashboard-glass.css">
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>

    <!-- Navigation -->
    <nav class="navbar-glass">
        <div class="container">
            <a href="index.html" class="navbar-brand">
                <span class="logo-icon"><i class="bi bi-graph-up-arrow"></i></span>
                Trading Journal
            </a>
            <ul class="navbar-nav">
                <li><a href="dashboard.html" class="nav-link"><i class="bi bi-speedometer2"></i> 대시보드</a></li>
                <li><a href="index.html" class="nav-link"><i class="bi bi-list-ul"></i> 거래관리</a></li>
                <li><a href="risk.html" class="nav-link"><i class="bi bi-shield-check"></i> 리스크</a></li>
                <li><a href="plans.html" class="nav-link"><i class="bi bi-journal-bookmark"></i> 트레이드플랜</a></li>
                <li><a href="correlation.html" class="nav-link"><i class="bi bi-grid-3x3"></i> 상관관계</a></li>
                <li><a href="dividend.html" class="nav-link active"><i class="bi bi-cash-coin"></i> 배당금</a></li>
                <li><a href="ai-assistant.html" class="nav-link"><i class="bi bi-robot"></i> AI</a></li>
                <li><a href="accounts.html" class="nav-link"><i class="bi bi-wallet2"></i> 계좌</a></li>
                <li><a href="#" class="nav-link" onclick="logout()"><i class="bi bi-box-arrow-right"></i></a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- 배당금 요약 카드 -->
        <div class="stats-grid">
            <div class="stat-card positive">
                <div class="stat-card-header">
                    <span class="stat-card-label">총 배당금</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-cash-coin"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="total-dividends">₩0</div>
                <div class="stat-card-change">세후 기준</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-label">올해 배당금</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="yearly-dividends">₩0</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-label">월평균 배당금</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-graph-up-arrow"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="monthly-average">₩0</div>
                <div class="stat-card-change">최근 12개월</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-header">
                    <span class="stat-card-label">배당 수익률</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-percent"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="dividend-yield">0%</div>
                <div class="stat-card-change">연간 기준</div>
            </div>
        </div>

        <!-- 배당금 입력 폼 -->
        <div class="glass-card mb-8">
            <div class="glass-card-header">
                <h3><i class="bi bi-pencil-square"></i> 배당금 기록</h3>
            </div>
            <div class="glass-card-body">
                <form id="dividend-form">
                    <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: var(--space-4); margin-bottom: var(--space-4);">
                        <div class="form-group">
                            <label class="form-label">종목 선택</label>
                            <select class="form-input" id="stock-select" required>
                                <option value="">종목 선택</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">배당락일</label>
                            <input type="date" class="form-input" id="ex-dividend-date" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">지급일</label>
                            <input type="date" class="form-input" id="payment-date" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">주당 배당금</label>
                            <input type="number" class="form-input" id="dividend-per-share" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">보유 수량</label>
                            <input type="number" class="form-input" id="quantity" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">세율 (%)</label>
                            <input type="number" class="form-input" id="tax-rate" step="0.01" value="15.4">
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-4);">
                        <div class="form-group">
                            <label class="form-label">메모</label>
                            <input type="text" class="form-input" id="memo" placeholder="배당금 관련 메모">
                        </div>
                        <div class="form-group">
                            <label class="form-label">&nbsp;</label>
                            <button type="submit" class="btn-glass primary" style="width: 100%;">
                                <i class="bi bi-plus-circle"></i>
                                배당금 추가
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- 차트 섹션 -->
        <div class="charts-grid mb-8">
            <div class="glass-card">
                <div class="glass-card-header">
                    <h3><i class="bi bi-graph-up"></i> 월별 배당금 추이</h3>
                </div>
                <div class="glass-card-body">
                    <div class="chart-container">
                        <canvas id="monthlyDividendChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="glass-card">
                <div class="glass-card-header">
                    <h3><i class="bi bi-trophy"></i> 배당금 TOP 5 종목</h3>
                </div>
                <div class="glass-card-body" style="padding: 0;">
                    <table class="glass-table">
                        <thead>
                            <tr>
                                <th>종목</th>
                                <th class="text-right">배당금</th>
                                <th class="text-right">횟수</th>
                            </tr>
                        </thead>
                        <tbody id="top-dividend-stocks">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 배당금 내역 테이블 -->
        <div class="glass-card">
            <div class="glass-card-header">
                <h3><i class="bi bi-table"></i> 배당금 내역</h3>
                <div>
                    <select class="select-glass" id="dividend-filter">
                        <option value="all">전체</option>
                        <option value="year">올해</option>
                        <option value="quarter">이번 분기</option>
                        <option value="month">이번 달</option>
                    </select>
                </div>
            </div>
            <div class="glass-card-body" style="padding: 0;">
                <div style="overflow-x: auto;">
                    <table class="glass-table">
                        <thead>
                            <tr>
                                <th>지급일</th>
                                <th>종목</th>
                                <th>배당락일</th>
                                <th class="text-right">주당배당금</th>
                                <th class="text-right">수량</th>
                                <th class="text-right">총배당금</th>
                                <th class="text-right">세금</th>
                                <th class="text-right">실수령액</th>
                                <th>메모</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody id="dividend-list">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="utils.js"></script>
    <script src="auth.js"></script>
    <script src="dividend.js"></script>
</body>
</html>