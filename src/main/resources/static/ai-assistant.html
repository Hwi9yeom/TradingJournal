<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì–´ì‹œìŠ¤í„´íŠ¸ - íˆ¬ì ê¸°ë¡ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="css/dashboard-glass.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        .chat-container {
            height: calc(100vh - 350px);
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-5);
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-lg);
        }
        .message {
            max-width: 85%;
            margin-bottom: var(--space-4);
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-lg);
            word-wrap: break-word;
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
        }
        .message.user {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-mid));
            color: var(--text-primary);
            margin-left: auto;
            border-bottom-right-radius: var(--radius-sm);
            box-shadow: 0 4px 15px var(--color-accent-glow);
        }
        .message.assistant {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            margin-right: auto;
            border-bottom-left-radius: var(--radius-sm);
        }
        .message.assistant pre {
            background: rgba(0, 0, 0, 0.3);
            padding: var(--space-3);
            border-radius: var(--radius-sm);
            overflow-x: auto;
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: var(--font-size-sm);
        }
        .chat-input-container {
            padding: var(--space-4) 0;
        }
        .insight-card {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            transition: var(--transition-base);
            border-left: 3px solid;
            margin-bottom: var(--space-3);
        }
        .insight-card:hover {
            transform: translateY(-2px);
            border-color: var(--glass-border-hover);
        }
        .insight-card.performance {
            border-left-color: var(--color-positive);
        }
        .insight-card.risk {
            border-left-color: var(--color-negative);
        }
        .insight-card.strategy {
            border-left-color: var(--color-info);
        }
        .quick-action-btn {
            width: 100%;
            text-align: left;
            padding: var(--space-3) var(--space-4);
            margin-bottom: var(--space-2);
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            transition: var(--transition-base);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        .quick-action-btn:hover {
            background: var(--glass-bg-hover);
            border-color: var(--glass-border-hover);
            transform: translateY(-1px);
        }
        .quick-action-btn.success {
            border-left: 3px solid var(--color-positive);
        }
        .quick-action-btn.danger {
            border-left: 3px solid var(--color-negative);
        }
        .quick-action-btn i {
            width: 24px;
            font-size: var(--font-size-lg);
        }
        .typing-indicator {
            display: inline-flex;
            gap: var(--space-1);
            padding: var(--space-2) var(--space-3);
        }
        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typing 1s infinite;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }
        .status-indicator.connected {
            background: var(--color-positive);
            box-shadow: 0 0 10px var(--color-positive-glow);
        }
        .status-indicator.disconnected {
            background: var(--color-negative);
            box-shadow: 0 0 10px var(--color-negative-glow);
        }
    </style>
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>

    <!-- Navigation -->
    <nav class="navbar-glass">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="logo-icon">ğŸ’¼</span>
                íˆ¬ì ê¸°ë¡ ì„œë¹„ìŠ¤
            </a>
            <ul class="navbar-nav">
                <li><a class="nav-link" href="dashboard.html"><i class="bi bi-speedometer2"></i> ëŒ€ì‹œë³´ë“œ</a></li>
                <li><a class="nav-link" href="patterns.html"><i class="bi bi-graph-up"></i> íŒ¨í„´ë¶„ì„</a></li>
                <li><a class="nav-link" href="reviews.html"><i class="bi bi-journal-text"></i> ê±°ë˜ë³µê¸°</a></li>
                <li><a class="nav-link" href="risk.html"><i class="bi bi-shield-check"></i> ë¦¬ìŠ¤í¬ê´€ë¦¬</a></li>
                <li><a class="nav-link" href="correlation.html"><i class="bi bi-diagram-3"></i> ìƒê´€ê´€ê³„ë¶„ì„</a></li>
                <li><a class="nav-link" href="backtest.html"><i class="bi bi-clock-history"></i> ë°±í…ŒìŠ¤íŒ…</a></li>
                <li><a class="nav-link active" href="ai-assistant.html"><i class="bi bi-robot"></i> AIì–´ì‹œìŠ¤í„´íŠ¸</a></li>
                <li><a class="nav-link" href="index.html"><i class="bi bi-wallet2"></i> ê±°ë˜ê´€ë¦¬</a></li>
                <li><a class="nav-link" href="accounts.html"><i class="bi bi-person-circle"></i> ê³„ì¢Œê´€ë¦¬</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-container">
        <div class="page-header">
            <div class="page-title">
                <h1><i class="bi bi-robot"></i> AI íŠ¸ë ˆì´ë”© ì–´ì‹œìŠ¤í„´íŠ¸</h1>
                <p class="subtitle">ì¸ê³µì§€ëŠ¥ ê¸°ë°˜ ê±°ë˜ ë¶„ì„ ë° ì¡°ì–¸</p>
            </div>
            <div style="display: flex; align-items: center; gap: var(--space-3);">
                <span class="status-indicator" id="ollamaStatus"></span>
                <span style="color: var(--text-muted); font-size: var(--font-size-sm);" id="ollamaStatusText">ì—°ê²° í™•ì¸ ì¤‘...</span>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: var(--space-6);">
            <!-- ì¢Œì¸¡: ë¹ ë¥¸ ë¶„ì„ & ì¸ì‚¬ì´íŠ¸ -->
            <div>
                <!-- ë¹ ë¥¸ ë¶„ì„ -->
                <div class="glass-card mb-6">
                    <div class="glass-card-header">
                        <h3><i class="bi bi-lightning-charge"></i>ë¹ ë¥¸ ë¶„ì„</h3>
                    </div>
                    <div class="glass-card-body">
                        <button class="quick-action-btn success" onclick="analyzePerformance()">
                            <i class="bi bi-graph-up-arrow"></i>ì„±ê³¼ ë¶„ì„
                        </button>
                        <button class="quick-action-btn danger" onclick="analyzeRisk()">
                            <i class="bi bi-shield-exclamation"></i>ë¦¬ìŠ¤í¬ ë¶„ì„
                        </button>
                        <div style="margin-top: var(--space-4);">
                            <label class="form-label">ë¶„ì„ ê¸°ê°„</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2);">
                                <input type="date" class="form-input" id="analysisStartDate" style="font-size: var(--font-size-sm); padding: var(--space-2) var(--space-3);">
                                <input type="date" class="form-input" id="analysisEndDate" style="font-size: var(--font-size-sm); padding: var(--space-2) var(--space-3);">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìµœê·¼ ì¸ì‚¬ì´íŠ¸ -->
                <div class="glass-card">
                    <div class="glass-card-header">
                        <h3><i class="bi bi-lightbulb"></i>ìµœê·¼ ì¸ì‚¬ì´íŠ¸</h3>
                    </div>
                    <div class="glass-card-body" id="insightsList">
                        <div class="empty-state" style="padding: var(--space-8) var(--space-4);">
                            <i class="bi bi-inbox empty-state-icon"></i>
                            <div class="empty-state-title">ì¸ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                            <p class="empty-state-desc">ë¶„ì„ì„ ì‹¤í–‰í•˜ë©´ ì¸ì‚¬ì´íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ìš°ì¸¡: ì±„íŒ… -->
            <div>
                <div class="glass-card">
                    <div class="glass-card-header">
                        <h3><i class="bi bi-chat-dots"></i>AI ì±„íŒ…</h3>
                        <button class="btn-glass" onclick="clearChat()">
                            <i class="bi bi-trash"></i>ëŒ€í™” ì´ˆê¸°í™”
                        </button>
                    </div>
                    <div style="padding: 0;">
                        <div class="chat-container">
                            <div class="chat-messages" id="chatMessages">
                                <div class="message assistant">
                                    ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” AI íŠ¸ë ˆì´ë”© ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ê±°ë˜ ë¶„ì„, ë¦¬ìŠ¤í¬ ê´€ë¦¬, ì „ëµ ìµœì í™” ë“±ì— ëŒ€í•´ ì§ˆë¬¸í•´ì£¼ì„¸ìš”.
                                    <br><br>
                                    <strong>ì˜ˆì‹œ ì§ˆë¬¸:</strong>
                                    <ul style="margin-bottom: 0; margin-top: var(--space-2);">
                                        <li>ìµœê·¼ 3ê°œì›” ê±°ë˜ ì„±ê³¼ë¥¼ ë¶„ì„í•´ì¤˜</li>
                                        <li>í˜„ì¬ ë¦¬ìŠ¤í¬ ìƒíƒœê°€ ì–´ë–¤ê°€ìš”?</li>
                                        <li>ìŠ¹ë¥ ì„ ë†’ì´ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</li>
                                        <li>ì†ì ˆ ì „ëµì— ëŒ€í•´ ì¡°ì–¸í•´ì¤˜</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="chat-input-container" style="padding: var(--space-4) var(--space-5);">
                                <div style="display: flex; gap: var(--space-2);">
                                    <input type="text" class="form-input" id="chatInput"
                                           placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                                           onkeypress="if(event.key==='Enter') sendMessage()">
                                    <button class="btn-glass primary" onclick="sendMessage()" id="sendBtn">
                                        <i class="bi bi-send"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¶„ì„ ê²°ê³¼ ëª¨ë‹¬ -->
    <div class="modal-glass" id="analysisModal">
        <div class="modal-glass-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="analysisModalTitle">
                    <i class="bi bi-graph-up"></i>AI ë¶„ì„ ê²°ê³¼
                </h3>
                <button type="button" class="modal-close" onclick="closeAnalysisModal()">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body" id="analysisModalBody" style="max-height: 60vh; overflow-y: auto;">
                <div style="text-align: center; padding: var(--space-10) 0;">
                    <div class="spinner"></div>
                    <p style="margin-top: var(--space-4); color: var(--text-muted);">AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-glass" onclick="closeAnalysisModal()">ë‹«ê¸°</button>
                <button type="button" class="btn-glass primary" onclick="copyAnalysisToChat()">
                    <i class="bi bi-chat-dots"></i>ì±„íŒ…ìœ¼ë¡œ ì´ì–´ì„œ ì§ˆë¬¸
                </button>
            </div>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="ai-assistant.js"></script>
    <script>
        // Modal control functions
        function closeAnalysisModal() {
            document.getElementById('analysisModal').classList.remove('show');
        }

        // Close modal when clicking outside
        document.getElementById('analysisModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAnalysisModal();
            }
        });
    </script>
</body>
</html>
