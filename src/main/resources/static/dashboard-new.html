<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Trading Journal</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Chart.js & D3 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/dashboard-glass.css">
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>

    <!-- Navigation -->
    <nav class="navbar-glass">
        <div class="container">
            <a href="index.html" class="navbar-brand">
                <span class="logo-icon"><i class="bi bi-graph-up-arrow"></i></span>
                Trading Journal
            </a>
            <ul class="navbar-nav">
                <li><a href="dashboard.html" class="nav-link active"><i class="bi bi-speedometer2"></i> 대시보드</a></li>
                <li><a href="patterns.html" class="nav-link"><i class="bi bi-diagram-3"></i> 패턴분석</a></li>
                <li><a href="reviews.html" class="nav-link"><i class="bi bi-journal-text"></i> 거래복기</a></li>
                <li><a href="risk.html" class="nav-link"><i class="bi bi-shield-check"></i> 리스크</a></li>
                <li><a href="sectors.html" class="nav-link"><i class="bi bi-pie-chart"></i> 섹터</a></li>
                <li><a href="backtest.html" class="nav-link"><i class="bi bi-clock-history"></i> 백테스트</a></li>
                <li><a href="ai-assistant.html" class="nav-link"><i class="bi bi-robot"></i> AI</a></li>
                <li><a href="index.html" class="nav-link"><i class="bi bi-list-ul"></i> 거래</a></li>
                <li><a href="#" class="nav-link" onclick="logout()"><i class="bi bi-box-arrow-right"></i></a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Page Header -->
        <header class="page-header fade-in">
            <div class="page-title">
                <h1>Portfolio Dashboard</h1>
                <span class="subtitle">실시간 포트폴리오 성과 및 분석</span>
            </div>
            <div class="dropdown-glass" id="reportDropdown">
                <button class="btn-glass" onclick="toggleDropdown('reportDropdown')">
                    <i class="bi bi-file-earmark-pdf"></i>
                    PDF 리포트
                    <i class="bi bi-chevron-down"></i>
                </button>
                <div class="dropdown-menu">
                    <a href="#" class="dropdown-item" onclick="downloadReport('ytd')">
                        <i class="bi bi-calendar-check"></i> YTD 리포트
                    </a>
                    <a href="#" class="dropdown-item" onclick="downloadReport('monthly')">
                        <i class="bi bi-calendar-month"></i> 이번 달 리포트
                    </a>
                    <a href="#" class="dropdown-item" onclick="downloadReport('yearly')">
                        <i class="bi bi-calendar-range"></i> 올해 리포트
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item" onclick="openCustomReportModal()">
                        <i class="bi bi-calendar2-range"></i> 기간 선택...
                    </a>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <section class="stats-grid">
            <div class="stat-card fade-in stagger-1">
                <div class="stat-card-header">
                    <span class="stat-card-label">총 투자금액</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-cash-stack"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="total-investment">₩0</div>
                <div class="stat-card-change">
                    <i class="bi bi-wallet2"></i>
                    투자 원금
                </div>
            </div>
            <div class="stat-card fade-in stagger-2">
                <div class="stat-card-header">
                    <span class="stat-card-label">현재 평가액</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="total-value">₩0</div>
                <div class="stat-card-change">
                    <i class="bi bi-bar-chart"></i>
                    현재 가치
                </div>
            </div>
            <div class="stat-card fade-in stagger-3" id="return-card">
                <div class="stat-card-header">
                    <span class="stat-card-label">총 수익률</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-percent"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="total-return">0%</div>
                <div class="stat-card-change" id="total-profit-amount">
                    ₩0
                </div>
            </div>
            <div class="stat-card fade-in stagger-4" id="realized-card">
                <div class="stat-card-header">
                    <span class="stat-card-label">실현 손익</span>
                    <div class="stat-card-icon">
                        <i class="bi bi-coin"></i>
                    </div>
                </div>
                <div class="stat-card-value" id="realized-pnl">₩0</div>
                <div class="stat-card-change">
                    <i class="bi bi-check-circle"></i>
                    확정 손익
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-grid mb-8">
            <div class="glass-card fade-in">
                <div class="glass-card-header">
                    <h3><i class="bi bi-activity"></i> 자산 가치 추이</h3>
                    <div class="period-selector" id="asset-period">
                        <button class="period-btn active" onclick="updateAssetChart('1M')">1M</button>
                        <button class="period-btn" onclick="updateAssetChart('3M')">3M</button>
                        <button class="period-btn" onclick="updateAssetChart('6M')">6M</button>
                        <button class="period-btn" onclick="updateAssetChart('1Y')">1Y</button>
                        <button class="period-btn" onclick="updateAssetChart('ALL')">ALL</button>
                    </div>
                </div>
                <div class="glass-card-body">
                    <div class="chart-container">
                        <canvas id="assetValueChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="glass-card fade-in">
                <div class="glass-card-header">
                    <h3><i class="bi bi-pie-chart"></i> 포트폴리오 구성</h3>
                </div>
                <div class="glass-card-body">
                    <div class="chart-container">
                        <canvas id="portfolioCompositionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Treemap -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-grid-3x3-gap"></i> 포트폴리오 성과 히트맵</h3>
                <div class="period-selector" id="treemap-period-selector">
                    <button class="period-btn active" data-period="1D">1D</button>
                    <button class="period-btn" data-period="1W">1W</button>
                    <button class="period-btn" data-period="1M">1M</button>
                    <button class="period-btn" data-period="MTD">MTD</button>
                    <button class="period-btn" data-period="3M">3M</button>
                    <button class="period-btn" data-period="6M">6M</button>
                    <button class="period-btn" data-period="1Y">1Y</button>
                </div>
            </div>
            <div class="glass-card-body">
                <div class="treemap-summary">
                    <div class="treemap-summary-item">
                        <label>총 투자금액</label>
                        <div class="value font-mono" id="treemap-total-investment">₩0</div>
                    </div>
                    <div class="treemap-summary-item">
                        <label>평균 수익률</label>
                        <div class="value font-mono" id="treemap-avg-performance">0%</div>
                    </div>
                    <div class="treemap-summary-item">
                        <label>선택 기간</label>
                        <div class="value" id="treemap-period-label">1일</div>
                    </div>
                </div>
                <div class="treemap-container" id="portfolio-treemap"></div>
                <div class="legend-row">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #dc3545;"></div>
                        <span>-10%+</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e77681;"></div>
                        <span>-5%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #6c757d;"></div>
                        <span>0%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #5cb085;"></div>
                        <span>+5%</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #198754;"></div>
                        <span>+10%+</span>
                    </div>
                </div>
                <div id="treemap-empty" class="empty-state hidden">
                    <div class="empty-state-icon"><i class="bi bi-inbox"></i></div>
                    <div class="empty-state-title">보유 종목 없음</div>
                    <div class="empty-state-desc">포트폴리오에 보유 종목이 없습니다.</div>
                </div>
            </div>
        </section>

        <!-- Top Performers -->
        <section class="two-col-grid mb-8">
            <div class="glass-card fade-in">
                <div class="glass-card-header" style="border-left: 3px solid var(--color-positive);">
                    <h3><i class="bi bi-arrow-up-circle" style="color: var(--color-positive);"></i> 수익률 TOP 5</h3>
                </div>
                <div class="glass-card-body" style="padding: 0;">
                    <table class="glass-table">
                        <thead>
                            <tr>
                                <th>종목</th>
                                <th class="text-right">수익률</th>
                                <th class="text-right">수익금</th>
                            </tr>
                        </thead>
                        <tbody id="top-gainers">
                            <tr><td colspan="3" class="text-center text-muted">로딩 중...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="glass-card fade-in">
                <div class="glass-card-header" style="border-left: 3px solid var(--color-negative);">
                    <h3><i class="bi bi-arrow-down-circle" style="color: var(--color-negative);"></i> 손실률 TOP 5</h3>
                </div>
                <div class="glass-card-body" style="padding: 0;">
                    <table class="glass-table">
                        <thead>
                            <tr>
                                <th>종목</th>
                                <th class="text-right">손실률</th>
                                <th class="text-right">손실금</th>
                            </tr>
                        </thead>
                        <tbody id="top-losers">
                            <tr><td colspan="3" class="text-center text-muted">로딩 중...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Trading Statistics -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-bar-chart-line"></i> 거래 통계</h3>
            </div>
            <div class="glass-card-body">
                <div class="stats-row">
                    <div class="stats-row-item">
                        <label>총 거래 횟수</label>
                        <div class="value" id="total-trades">0</div>
                    </div>
                    <div class="stats-row-item">
                        <label>거래 종목 수</label>
                        <div class="value" id="unique-stocks">0</div>
                    </div>
                    <div class="stats-row-item">
                        <label>평균 보유 기간</label>
                        <div class="value" id="avg-holding-period">0일</div>
                    </div>
                    <div class="stats-row-item">
                        <label>승률</label>
                        <div class="value" id="win-rate">0%</div>
                    </div>
                    <div class="stats-row-item">
                        <label>평균 수익률</label>
                        <div class="value" id="avg-return">0%</div>
                    </div>
                    <div class="stats-row-item">
                        <label>최대 수익률</label>
                        <div class="value" id="max-return">0%</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Monthly Returns -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-calendar3"></i> 월별 수익률</h3>
            </div>
            <div class="glass-card-body">
                <div class="chart-container" style="height: 200px;">
                    <canvas id="monthlyReturnChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Advanced Analytics -->
        <section class="two-col-grid mb-8">
            <!-- Equity Curve -->
            <div class="glass-card fade-in">
                <div class="glass-card-header">
                    <h3><i class="bi bi-graph-up-arrow" style="color: var(--color-positive);"></i> Equity Curve</h3>
                    <div class="period-selector" id="equity-period">
                        <button class="period-btn" onclick="updateEquityCurve('3M')">3M</button>
                        <button class="period-btn" onclick="updateEquityCurve('6M')">6M</button>
                        <button class="period-btn active" onclick="updateEquityCurve('1Y')">1Y</button>
                        <button class="period-btn" onclick="updateEquityCurve('ALL')">ALL</button>
                    </div>
                </div>
                <div class="glass-card-body">
                    <div class="treemap-summary" style="margin-bottom: var(--space-4);">
                        <div class="treemap-summary-item">
                            <label>총 수익률</label>
                            <div class="value font-mono" id="equity-total-return">0%</div>
                        </div>
                        <div class="treemap-summary-item">
                            <label>CAGR</label>
                            <div class="value font-mono" id="equity-cagr">0%</div>
                        </div>
                        <div class="treemap-summary-item">
                            <label>최종 가치</label>
                            <div class="value font-mono" id="equity-final-value">₩0</div>
                        </div>
                    </div>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="equityCurveChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Drawdown -->
            <div class="glass-card fade-in">
                <div class="glass-card-header">
                    <h3><i class="bi bi-graph-down-arrow" style="color: var(--color-negative);"></i> Drawdown</h3>
                    <div class="period-selector" id="drawdown-period">
                        <button class="period-btn" onclick="updateDrawdown('3M')">3M</button>
                        <button class="period-btn" onclick="updateDrawdown('6M')">6M</button>
                        <button class="period-btn active" onclick="updateDrawdown('1Y')">1Y</button>
                        <button class="period-btn" onclick="updateDrawdown('ALL')">ALL</button>
                    </div>
                </div>
                <div class="glass-card-body">
                    <div class="treemap-summary" style="margin-bottom: var(--space-4);">
                        <div class="treemap-summary-item">
                            <label>최대 낙폭</label>
                            <div class="value font-mono text-negative" id="max-drawdown">0%</div>
                        </div>
                        <div class="treemap-summary-item">
                            <label>현재 낙폭</label>
                            <div class="value font-mono" id="current-drawdown">0%</div>
                        </div>
                        <div class="treemap-summary-item">
                            <label>회복 기간</label>
                            <div class="value" id="recovery-days">-</div>
                        </div>
                    </div>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="drawdownChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Correlation Matrix -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-grid-3x3"></i> 종목 상관관계</h3>
                <div class="period-selector" id="correlation-period">
                    <button class="period-btn" onclick="updateCorrelation('3M')">3M</button>
                    <button class="period-btn" onclick="updateCorrelation('6M')">6M</button>
                    <button class="period-btn active" onclick="updateCorrelation('1Y')">1Y</button>
                    <button class="period-btn" onclick="updateCorrelation('ALL')">ALL</button>
                </div>
            </div>
            <div class="glass-card-body">
                <div class="treemap-summary" style="margin-bottom: var(--space-5);">
                    <div class="treemap-summary-item">
                        <label>평균 상관계수</label>
                        <div class="value font-mono" id="avg-correlation">0.00</div>
                    </div>
                    <div class="treemap-summary-item">
                        <label>분산투자 효과</label>
                        <div class="value" id="diversification-score">-</div>
                    </div>
                    <div class="treemap-summary-item">
                        <label>분석 종목 수</label>
                        <div class="value" id="correlation-stocks">0</div>
                    </div>
                </div>
                <div class="correlation-container">
                    <table class="correlation-matrix" id="correlation-matrix">
                        <thead id="correlation-header"></thead>
                        <tbody id="correlation-body"></tbody>
                    </table>
                </div>
                <div class="legend-row">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #22c55e;"></div>
                        <span>-1.0 (역상관)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fbbf24;"></div>
                        <span>0 (무관)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ef4444;"></div>
                        <span>+1.0 (정상관)</span>
                    </div>
                </div>
                <div id="correlation-empty" class="empty-state hidden">
                    <div class="empty-state-icon"><i class="bi bi-info-circle"></i></div>
                    <div class="empty-state-title">데이터 부족</div>
                    <div class="empty-state-desc">최소 2개 이상의 종목 거래 데이터가 필요합니다.</div>
                </div>
            </div>
        </section>

        <!-- Risk Analysis -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-shield-check" style="color: var(--color-warning);"></i> 리스크 분석</h3>
                <div class="period-selector" id="risk-period">
                    <button class="period-btn" onclick="updateRiskMetrics('3M')">3M</button>
                    <button class="period-btn" onclick="updateRiskMetrics('6M')">6M</button>
                    <button class="period-btn active" onclick="updateRiskMetrics('1Y')">1Y</button>
                    <button class="period-btn" onclick="updateRiskMetrics('ALL')">ALL</button>
                </div>
            </div>
            <div class="glass-card-body">
                <!-- Risk Level Badge -->
                <div class="text-center mb-6">
                    <span class="risk-badge medium" id="risk-level-badge">
                        <i class="bi bi-shield-fill"></i>
                        <span id="risk-level-text">분석 중...</span>
                    </span>
                </div>

                <!-- Key Risk Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <label>샤프 비율</label>
                        <div class="value" id="sharpe-ratio">-</div>
                        <div class="hint">위험 조정 수익률</div>
                    </div>
                    <div class="metric-card">
                        <label>소르티노 비율</label>
                        <div class="value" id="sortino-ratio">-</div>
                        <div class="hint">하락 위험 조정</div>
                    </div>
                    <div class="metric-card">
                        <label>칼마 비율</label>
                        <div class="value" id="calmar-ratio">-</div>
                        <div class="hint">CAGR / MDD</div>
                    </div>
                    <div class="metric-card">
                        <label>손익비</label>
                        <div class="value" id="profit-factor">-</div>
                        <div class="hint">총이익 / 총손실</div>
                    </div>
                </div>

                <!-- VaR Section -->
                <div class="var-grid">
                    <div class="var-card">
                        <div class="var-card-header">
                            <i class="bi bi-exclamation-triangle" style="color: var(--color-warning);"></i>
                            VaR 95% 신뢰수준
                        </div>
                        <div class="var-values">
                            <div class="var-row">
                                <div class="label"><span class="badge daily">일간</span></div>
                                <div class="value font-mono" id="var95-daily">-</div>
                            </div>
                            <div class="var-row">
                                <div class="label"><span class="badge weekly">주간</span></div>
                                <div class="value font-mono" id="var95-weekly">-</div>
                            </div>
                            <div class="var-row">
                                <div class="label"><span class="badge monthly">월간</span></div>
                                <div class="value font-mono" id="var95-monthly">-</div>
                            </div>
                        </div>
                        <div style="margin-top: var(--space-4); padding-top: var(--space-3); border-top: 1px solid var(--glass-border); text-align: center;">
                            <div class="text-muted" style="font-size: var(--font-size-xs); margin-bottom: var(--space-1);">95% 일간 VaR 금액</div>
                            <div class="font-mono text-negative" style="font-size: var(--font-size-lg);" id="var-amount">-</div>
                        </div>
                    </div>
                    <div class="var-card">
                        <div class="var-card-header">
                            <i class="bi bi-exclamation-octagon" style="color: var(--color-negative);"></i>
                            VaR 99% 신뢰수준
                        </div>
                        <div class="var-values">
                            <div class="var-row">
                                <div class="label"><span class="badge daily" style="background: rgba(255, 107, 107, 0.2); color: var(--color-negative);">일간</span></div>
                                <div class="value font-mono" id="var99-daily">-</div>
                            </div>
                            <div class="var-row">
                                <div class="label"><span class="badge weekly">주간</span></div>
                                <div class="value font-mono" id="var99-weekly">-</div>
                            </div>
                            <div class="var-row">
                                <div class="label"><span class="badge monthly">월간</span></div>
                                <div class="value font-mono" id="var99-monthly">-</div>
                            </div>
                        </div>
                        <div style="margin-top: var(--space-4); padding-top: var(--space-3); border-top: 1px solid var(--glass-border);">
                            <table style="width: 100%; font-size: var(--font-size-xs);">
                                <tr>
                                    <td class="text-muted">연환산 변동성</td>
                                    <td class="text-right font-mono" id="volatility">-</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">하락 변동성</td>
                                    <td class="text-right font-mono" id="downside-deviation">-</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">MDD</td>
                                    <td class="text-right font-mono text-negative" id="risk-mdd">-</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">CAGR</td>
                                    <td class="text-right font-mono" id="risk-cagr">-</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">승률</td>
                                    <td class="text-right font-mono" id="risk-winrate">-</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">거래일</td>
                                    <td class="text-right font-mono" id="trading-days">-</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benchmark Comparison -->
        <section class="glass-card mb-8 fade-in">
            <div class="glass-card-header">
                <h3><i class="bi bi-bar-chart-line"></i> 벤치마크 비교</h3>
                <div style="display: flex; align-items: center; gap: var(--space-3);">
                    <select class="select-glass" id="benchmark-select">
                        <option value="SP500">S&P 500</option>
                        <option value="NASDAQ">NASDAQ</option>
                        <option value="KOSPI">KOSPI</option>
                        <option value="KOSDAQ">KOSDAQ</option>
                        <option value="DOW">다우존스</option>
                    </select>
                    <div class="period-selector" id="benchmark-period">
                        <button class="period-btn" onclick="updateBenchmark('3M')">3M</button>
                        <button class="period-btn" onclick="updateBenchmark('6M')">6M</button>
                        <button class="period-btn active" onclick="updateBenchmark('1Y')">1Y</button>
                        <button class="period-btn" onclick="updateBenchmark('ALL')">ALL</button>
                    </div>
                </div>
            </div>
            <div class="glass-card-body">
                <!-- Benchmark Metrics -->
                <div class="benchmark-metrics">
                    <div class="benchmark-metric">
                        <label>포트폴리오</label>
                        <div class="value" id="benchmark-portfolio-return">-</div>
                    </div>
                    <div class="benchmark-metric">
                        <label>벤치마크</label>
                        <div class="value" id="benchmark-index-return">-</div>
                    </div>
                    <div class="benchmark-metric highlight" id="excess-return-card">
                        <label>초과 수익률</label>
                        <div class="value" id="benchmark-excess-return">-</div>
                    </div>
                    <div class="benchmark-metric">
                        <label>알파 (α)</label>
                        <div class="value" id="benchmark-alpha">-</div>
                    </div>
                    <div class="benchmark-metric">
                        <label>베타 (β)</label>
                        <div class="value" id="benchmark-beta">-</div>
                    </div>
                    <div class="benchmark-metric">
                        <label>상관계수</label>
                        <div class="value" id="benchmark-correlation">-</div>
                    </div>
                </div>

                <!-- Benchmark Chart -->
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-6);">
                    <div class="chart-container" style="height: 280px;">
                        <canvas id="benchmarkComparisonChart"></canvas>
                    </div>
                    <div class="var-card">
                        <div class="var-card-header">
                            <i class="bi bi-list-check"></i>
                            추가 분석 지표
                        </div>
                        <table style="width: 100%; font-size: var(--font-size-xs);">
                            <tr>
                                <td class="text-muted">Information Ratio</td>
                                <td class="text-right font-mono" id="benchmark-info-ratio">-</td>
                            </tr>
                            <tr>
                                <td class="text-muted">Tracking Error</td>
                                <td class="text-right font-mono" id="benchmark-tracking-error">-</td>
                            </tr>
                            <tr>
                                <td class="text-muted">Treynor Ratio</td>
                                <td class="text-right font-mono" id="benchmark-treynor">-</td>
                            </tr>
                            <tr>
                                <td class="text-muted">R²</td>
                                <td class="text-right font-mono" id="benchmark-rsquared">-</td>
                            </tr>
                            <tr>
                                <td class="text-muted">포트폴리오 MDD</td>
                                <td class="text-right font-mono text-negative" id="benchmark-portfolio-mdd">-</td>
                            </tr>
                            <tr>
                                <td class="text-muted">벤치마크 MDD</td>
                                <td class="text-right font-mono" id="benchmark-index-mdd">-</td>
                            </tr>
                        </table>
                        <div style="margin-top: var(--space-4); display: flex; justify-content: space-between;">
                            <span class="risk-badge low" id="benchmark-win-months" style="font-size: var(--font-size-xs);">승: 0개월</span>
                            <span class="risk-badge high" id="benchmark-lose-months" style="font-size: var(--font-size-xs);">패: 0개월</span>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="benchmark-empty" class="empty-state hidden">
                    <div class="empty-state-icon"><i class="bi bi-database-x"></i></div>
                    <div class="empty-state-title">벤치마크 데이터 없음</div>
                    <div class="empty-state-desc">벤치마크 데이터가 없습니다.</div>
                    <button class="btn-glass primary" onclick="generateSampleBenchmark()">
                        <i class="bi bi-download"></i> 샘플 데이터 생성
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Custom Report Modal -->
    <div class="modal-glass" id="customReportModal">
        <div class="modal-glass-content">
            <div class="modal-header">
                <h3><i class="bi bi-calendar2-range"></i> 기간 선택 리포트</h3>
                <button class="modal-close" onclick="closeModal('customReportModal')">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">시작일</label>
                    <input type="date" class="form-input" id="reportStartDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">종료일</label>
                    <input type="date" class="form-input" id="reportEndDate" required>
                </div>
                <div style="padding: var(--space-4); background: rgba(102, 126, 234, 0.1); border-radius: var(--radius-md); border: 1px solid rgba(102, 126, 234, 0.3);">
                    <div style="display: flex; align-items: center; gap: var(--space-2); color: var(--color-info);">
                        <i class="bi bi-info-circle"></i>
                        <span style="font-size: var(--font-size-sm);">선택한 기간의 포트폴리오 성과가 PDF 리포트로 생성됩니다.</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-glass" onclick="closeModal('customReportModal')">취소</button>
                <button class="btn-glass primary" onclick="downloadCustomReport()">
                    <i class="bi bi-download"></i> 리포트 다운로드
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="utils.js"></script>
    <script src="auth.js"></script>
    <script src="js/dashboard-glass.js"></script>
</body>
</html>